<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <!-- Google Fonts -->

    <!-- Vendor CSS Files -->

    <!-- =======================================================
  * Template Name: NiceAdmin - v2.2.2
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body>
    <!-- ======= Header ======= -->
    <app-header></app-header>
    <!-- End Header -->

    <!-- ======= Sidebar ======= -->
    <app-sidbar-admin></app-sidbar-admin>
    <!-- End Sidebar-->

    <main id="main" class="main">
      <div class="pagetitle">
        <h1>Profile</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="['/dashboradadmin']">Accueil</a>
            </li>
            <li class="breadcrumb-item">Users</li>
            <li class="breadcrumb-item active">Profile</li>
          </ol>
        </nav>
      </div>
      <!-- End Page Title -->

      <section class="section profile">
        <div class="row">
          <div class="col-xl-4">
            <div class="card">
              <div
                class="card-body profile-card pt-4 d-flex flex-column align-items-center"
              >
                <img
                  src="{{
                    imgURL || 'http://localhost:8081/api/auth/Images/' + userid
                  }}"
                  style="
                    display: inline-block;
                    border-radius: 50%;
                    width: 120px;
                    height: 110px;
                  "
                  class="rounded-circle"
                />
                <h2>{{ firstName }} {{ lastName }}</h2>
                <!--<h3>Web Designer</h3>-->
              </div>
            </div>
          </div>

          <div class="col-xl-8">
            <div class="card">
              <div class="card-body pt-3">
                <!-- Bordered Tabs -->
                <ul class="nav nav-tabs nav-tabs-bordered">
                  <li class="nav-item">
                    <button
                      class="nav-link active"
                      data-bs-toggle="tab"
                      data-bs-target="#profile-overview"
                    >
                      Aperçu
                    </button>
                  </li>

                  <li class="nav-item">
                    <button
                      class="nav-link"
                      data-bs-toggle="tab"
                      data-bs-target="#profile-edit"
                    >
                      Editer le profil
                    </button>
                  </li>
                </ul>
                <div class="tab-content pt-2">
                  <div
                    class="tab-pane fade show active profile-overview"
                    id="profile-overview"
                  >
                    <h5 class="card-title">À propos</h5>
                    <p class="small fst-italic">{{ apropos }}</p>

                    <h5 class="card-title">Détails du profil</h5>

                    <div class="row">
                      <div class="col-lg-3 col-md-4 label">Nom et prénom</div>
                      <div class="col-lg-9 col-md-8">
                        {{ firstName }} {{ lastName }}
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-lg-3 col-md-4 label">N°cin</div>
                      <div class="col-lg-9 col-md-8">{{ ncin }}</div>
                    </div>

                    <div class="row">
                      <div class="col-lg-3 col-md-4 label">Email</div>
                      <div class="col-lg-9 col-md-8">
                        {{ email }}
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-lg-3 col-md-4 label">Téléphone</div>
                      <div class="col-lg-9 col-md-8">
                        (+216) {{ telephone }}
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-lg-3 col-md-4 label">Role</div>
                      <div class="col-lg-9 col-md-8">
                        {{ roles }}
                      </div>
                    </div>
                  </div>

                  <div
                    class="tab-pane fade profile-edit pt-3"
                    id="profile-edit"
                  >
                    <form
                      novalidate
                      class="row"
                      [formGroup]="reactiveForm"
                      (ngSubmit)="updateForm(reactiveForm)"
                    >
                      <div class="col-6">
                        <label for="yourName" class="form-label"
                          >Votre nom</label
                        >
                        <input
                          type="text"
                          name="name"
                          class="form-control"
                          id="firstName"
                          required
                          formControlName="firstName"
                          [ngClass]="{
                            'is-invalid': submitted && f.firstName.errors
                          }"
                        />
                        <div
                          *ngIf="submitted && f.firstName.errors"
                          class="invalid-feedback"
                        >
                          <div
                            *ngIf="f.firstName.errors.required"
                            style="text-align: center"
                          >
                            champ obligatoire
                          </div>
                        </div>
                      </div>

                      <div class="col-6">
                        <label for="lastName" class="form-label"
                          >Votre prenom</label
                        >
                        <input
                          type="text"
                          name="lastName"
                          class="form-control"
                          id="lastName"
                          required
                          formControlName="lastName"
                          [ngClass]="{
                            'is-invalid': submitted && f.lastName.errors
                          }"
                        />
                        <div
                          *ngIf="submitted && f.lastName.errors"
                          class="invalid-feedback"
                        >
                          <div
                            *ngIf="f.lastName.errors.required"
                            style="text-align: center"
                          >
                            champ obligatoire
                          </div>
                        </div>
                      </div>
                      <div class="col-6">
                        <label for="yourEmail" class="form-label">N°cin</label>
                        <input
                          type="text"
                          name="ncin"
                          class="form-control"
                          id="ncin"
                          required
                          formControlName="ncin"
                          [ngClass]="{
                            'is-invalid': submitted && f.ncin.errors
                          }"
                        />
                        <div
                          *ngIf="submitted && f.ncin.errors"
                          class="invalid-feedback"
                        >
                          <div
                            *ngIf="f.ncin.errors.required"
                            style="text-align: center"
                          >
                            champ obligatoire
                          </div>
                        </div>
                      </div>
                      <div class="col-6">
                        <label for="yourEmail" class="form-label"
                          >Telephone</label
                        >
                        <input
                          type="text"
                          name="telephone"
                          class="form-control"
                          id="ncin"
                          required
                          formControlName="telephone"
                          [ngClass]="{
                            'is-invalid': submitted && f.telephone.errors
                          }"
                        />
                        <div
                          *ngIf="submitted && f.telephone.errors"
                          class="invalid-feedback"
                        >
                          <div
                            *ngIf="f.telephone.errors.required"
                            style="text-align: center"
                          >
                            champ obligatoire
                          </div>
                        </div>
                      </div>

                      <div class="col-12">
                        <label for="yourUsername" class="form-label"
                          >Votre e-mail</label
                        >
                        <div class="input-group has-validation">
                          <span class="input-group-text" id="inputGroupPrepend"
                            >@</span
                          >
                          <input
                            type="email"
                            name="email"
                            class="form-control"
                            id="email"
                            required
                            formControlName="email"
                            [ngClass]="{
                              'is-invalid': submitted && f.email.errors
                            }"
                          />
                          <div
                            *ngIf="submitted && f.email.errors"
                            class="invalid-feedback"
                          >
                            <div
                              *ngIf="f.email.errors.required"
                              style="text-align: center"
                            >
                              champ obligatoire
                            </div>
                          </div>
                        </div>
                      </div>

                      <!--<div class="col-6">
                    <label for="yourPassword" class="form-label"
                      >Confirmation de mot de passe</label
                    >
                    <input
                      type="password"
                      name="password"
                      class="form-control"
                      id="password"
                      required
                      formControlName="pwdd"
                      [ngClass]="{
                        'is-invalid': submitted && f.pwdd.errors
                      }"
                    />
                    <div
                      *ngIf="submitted && f.pwdd.errors"
                      class="invalid-feedback"
                    >
                      <div
                        *ngIf="f.pwdd.errors.required"
                        style="text-align: center"
                      >
                        champ obligatoire
                      </div>
                    </div>
                  </div>-->
                      <!-- <div class="col-6">
                    <label for="yourPassword" class="form-label"
                      >Confirmation du mot de passe</label
                    >
                    <input
                      type="confirmpass"
                      name="confirmpass"
                      class="form-control"
                      id="password"
                      required
                      formControlName="confirmpass"
                      pattern=""
                      [ngClass]="{
                        'is-invalid': submitted && f.confirmpass.errors
                      }"
                    />
                    <div
                      *ngIf="submitted && f.confirmpass.errors"
                      class="invalid-feedback"
                    >
                      <div
                        *ngIf="f.confirmpass.errors.required"
                        style="text-align: center"
                      >
                        champ obligatoire
                      </div>
                    </div>
                  </div>-->
                      <div class="col-12">
                        <label
                          for="about"
                          class="col-md-4 col-lg-3 col-form-label"
                          >À propos</label
                        >

                        <textarea
                          type="text"
                          name="apropos"
                          class="form-control"
                          id="apropos"
                          required
                          formControlName="apropos"
                          [ngClass]="{
                            'is-invalid': submitted && f.apropos.errors
                          }"
                          id="about"
                          style="height: 100px"
                        ></textarea>
                        <div
                          *ngIf="submitted && f.apropos.errors"
                          class="invalid-feedback"
                        >
                          <div
                            *ngIf="f.apropos.errors.required"
                            style="text-align: center"
                          >
                            champ obligatoire
                          </div>
                        </div>
                      </div>

                      <div class="col-6">
                        <label class="form-control-label"
                          >Charger l'image</label
                        >
                        <div class="input-group has-validation">
                          <input
                            type="file"
                            class="btn btn-primary btn-sm"
                            accept="image/*"
                            (change)="onSelectFile($event)"
                          />
                        </div>
                      </div>
                      <div class="col-12"></div>
                      <div class="col-4" style="margin: auto; padding: 15px">
                        <button class="btn btn-primary w-100" type="submit">
                          <span
                            *ngIf="loading"
                            class="spinner-border spinner-border-sm mr-1"
                          ></span>
                          Edit Profile
                        </button>
                        <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
                          {{ error }}
                        </div>
                      </div>
                    </form>
                  </div>

                  <div class="tab-pane fade pt-3" id="profile-settings">
                    <!-- Settings Form -->
                    <form>
                      <div class="row mb-3">
                        <label
                          for="fullName"
                          class="col-md-4 col-lg-3 col-form-label"
                          >Email Notifications</label
                        >
                        <div class="col-md-8 col-lg-9">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="changesMade"
                              checked
                            />
                            <label class="form-check-label" for="changesMade">
                              Changes made to your account
                            </label>
                          </div>
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="newProducts"
                              checked
                            />
                            <label class="form-check-label" for="newProducts">
                              Information on new products and services
                            </label>
                          </div>
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="proOffers"
                            />
                            <label class="form-check-label" for="proOffers">
                              Marketing and promo offers
                            </label>
                          </div>
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="securityNotify"
                              checked
                              disabled
                            />
                            <label
                              class="form-check-label"
                              for="securityNotify"
                            >
                              Security alerts
                            </label>
                          </div>
                        </div>
                      </div>

                      <div class="text-center">
                        <button type="submit" class="btn btn-primary">
                          Save Changes
                        </button>
                      </div>
                    </form>
                    <!-- End settings Form -->
                  </div>
                </div>
                <!-- End Bordered Tabs -->
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- End #main -->

    <!-- ======= Footer ======= -->
    <app-footer></app-footer>
    <!-- End Footer -->

    <a
      href="#"
      class="back-to-top d-flex align-items-center justify-content-center"
      ><i class="bi bi-arrow-up-short"></i
    ></a>

    <!-- Vendor JS Files -->

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
